/**
 * 
 */
package com.scotmatson.banking;

import java.util.InputMismatchException;
import java.util.Scanner;

public class ATMSimulator
{
	// System Codes
	static final int UNSET_INPUT 	= 0;
	static final int INVALID_INPUT 	= -1;
	static final int CARD_A00 		= 1;			// Bank A : Valid
	static final int CARD_B00 		= 2;			// Bank B : Valid
	static final int CARD_C00		= 3;			// Bank ? : Expired
	static final int EXIT 			= 10;
	
	static Scanner in = new Scanner(System.in);
	static int userInput = UNSET_INPUT;
					 		
	/**
	 * 
	 */
	public static void printApplicationHeader()
	{
		System.out.println("###################################################");
	    System.out.println("#                                                 #");
		System.out.println("#            Welcome to Scot Matson's             #");			
		System.out.println("#          	   ** SIM ATM **                  #");
		System.out.println("#                                                 #");
		System.out.println("###################################################\n");

		System.out.println("SIM ATM is an interactive program which simulates");
        System.out.println("the basic functions of an ATM machine.\n");
        System.out.println("To continue, press the ENTER key.");		
		
		pressAnyKeyToContinue();
	}
	
	/**
	 * 
	 */
	public static int printApplicationMenu()
	{
		System.out.println("Please select a debit card from the following list:");
	    System.out.println("1) Card A");
	    System.out.println("2) Card B");
	    System.out.println("3) Expired Card");
	    System.out.println("4) Exit");
	    
	    int numberOfOptions = 4;
	    int userSelection = 0;
	    
	    try 
	    {
	    	int userInput = in.nextInt();
		    if (userSelection < 1 || userSelection > numberOfOptions)
		    {
		    	System.out.println("I'm sorry, that is not an option.");
		    	userSelection = INVALID_INPUT;
		    }
		    return userSelection;
	    }
	    catch (InputMismatchException e)
	    {
	    	System.out.println("Invalid user entry.\n");
	    	// Flush the Scanner.
	    	in.nextLine();
	    }
	    
//	    return userSelection;
	}
		
	/**
	 * 
	 */
	public static void pressAnyKeyToContinue()
	{
		try
		{
			System.in.read();
		}		
		catch(Exception e){}
	}
			
	/**
	 * 
	 */
	static public void run()
	{		
		userInput = printApplicationMenu();
		
		System.out.println("You chose: " + userInput);
	}
	
	static public void launch()
	{
		printApplicationHeader();
		
		while (userInput != EXIT) {
			run();
		}
		
		if (userInput == EXIT)
		{
			quit();
		}
	}
	
	/**
	 * 
	 */
	static public void quit()
	{
		System.exit(0);
	}
	
	/**
	 * 
	 * @param args
	 */
	public static void main(String[] args) 
	{
		ATMSimulator.launch();
	}
}
